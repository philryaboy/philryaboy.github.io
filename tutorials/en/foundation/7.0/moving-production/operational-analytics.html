---
layout: tutorial
title: Operational Analytics
relevantTo: [ios,android,windowsphone8,windows8,hybrid]
weight: 2
---
<br>
<p>This tutorial covers the following topics:</p>
<ul>
<li><a href="#introAnalytics">Introducing IBM MobileFirst Platform Operational Analytics</a></li>
<li><a href="#viewingDashboard">Viewing the Analytics Dashboard - Configurations</a></li>
<li><a href="#capturingData">Capturing data</a></li>
<li><a href="#applicationActivities">Capturing data - Application Activities</a></li>
<li><a href="#notificationActivities">Capturing data - Notification Activities</a></li>
<li><a href="#serverLogs">Capturing data - Server logs</a></li>
<li><a href="#clientLogs">Capturing data - Client logs</a></li>
<li><a href="#analyticsLogs">Analytics logs</a></li>
<li><a href="#sendingData">Sending data</a></li>
<li><a href="#creatingCustomChart">Creating a custom chart</a></li>
</ul>
<h2 id="introAnalytics">Introducing IBM MobileFirst Platform Operational Analytics</h2>
<p>MobileFirst Operational Analytics collects data about applications, adapters, devices, logs, and your own custom events to give a high-level view of the client interaction with the IBM MobileFirst Platform Server.</p>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/mfp_operational_analytics.jpg"/></p>
<p>In IBM MobileFirst Platform Foundation V7.0, MobileFirst Operational Analytics is delivered as an EAR file which contains two WAR files: <code>analytics.war</code> and <code>analytics-service.war</code>. You can deploy the EAR file to the following supported application servers:</p>
<ul>
<li>Liberty</li>
<li>WebSphere  Application Server</li>
<li>Tomcat</li>
</ul>
<p>In MobileFirst Studio, the two WAR files are installed and available by default in the embedded Liberty server.</p>
<h2 id="viewingDashboard">Viewing the Analytics Dashboard - Configurations</h2>
<p>The <code>wl.analytics.url</code> property must be set to send data to the Analytics server and the <code>wl.analytics.console.url</code> must be set to access the Analytics dashboard.</p>
<ol>
<li>You can set these two properties in the <code>server.xml</code> file:
<p>{% highlight xml  %}
<jndiEntry jndiName="AppName/wl.analytics.url" value="http://localhost:10080/analytics-service/data"/>
<jndiEntry jndiName="AppName/wl.analytics.console.url" value="http://localhost:10080/analytics/console"/>
{% endhighlight %} </p>

<p>After the property is set, the <strong>Analytics Dashboard</strong> link appears in the MobileFirst Operations Console.</p>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/Screen-Shot-2015-02-09-at-1.45.06-PM.png"/></p>
</li>
<li>Click the <strong>Analytics Dashboard</strong> link to open up the dashboard in a new window.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/Screen-Shot-2015-02-09-at-1.36.16-PM.png"/></p>
</li>
</ol>
<h2 id="capturingData">Capturing data</h2>
<p>Different types of analytics events are captured by the MobileFirst Operational Analytics server: app activities, notification activities, server logs, and client logs.</p>
<h3><a href="#applicationActivities">Application activities</a></h3>
<ul>
<li>Client initializations with the server</li>
<li>Adapter calls</li>
</ul>
<h3><a href="#notificationActivities">Notification activities</a></h3>
<ul>
<li>Push notifications</li>
</ul>
<h3><a href="#serverLogs">Server Logs</a></h3>
<ul>
<li>Server events</li>
<li>Server stack traces</li>
</ul>
<h3><a href="#clientLogs">Client Logs</a></h3>
<ul>
<li>Debug logs</li>
<li>Crashes</li>
<li>Custom events</li>
<li>Network latency information</li>
</ul>
<h2 id="applicationActivities">Capturing data - Application activities</h2>
<p>When an application activity occurs, the event is captured automatically and forwarded to the MobileFirst Operational Analytics server.</p>
<ul>
<li>The following API call results in a session hit that is visualized on MobileFirst Operational Analytics:
    </li>
<p>    
{% highlight javascript  %}
// a 'session hit' will be recorded upon a successful connection
WL.Client.connect();
{% endhighlight %} </p>
<li>The following API call results in an adapter hit that is visualized on the MobileFirst Operational Analytics dashboard:</li>

<p>
{% highlight javascript  %}
// an 'adapter hit' will be recorded upon a successful adapter invocation
WL.Client.invokeProcedure({...});
{% endhighlight %} </p>
</ul>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/MobileFirst-Analytics-70-SessionCharts.png"/></p>
<h2 id="notificationActivities">Capturing data - Notification Activities</h2>
<p>When a push notification occurs, the event is captured automatically and forwarded to the MobileFirst Operational Analytics server.</p>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/MobileFirst-Analytics-Push-7-0.png"/></p>
<h2 id="serverLogs">Capturing data - Server Logs</h2>
<p>The log data that is generated by MobileFirst Server is automatically forwarded to the MobileFirst Operational Analytics server, where the data can be searched and downloaded.</p>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/MobileFirst-Analytics-ServerLogs-7-0.png"/></p>
<p>To disable this behavior, set the <code>wl.analytics.logs.forward</code> property to <code>false</code>.</p>
<h2 id="clientLogs">Capturing data - Client Logs</h2>
<p>You can instrument a MobileFirst application with client logs to record client debugging information and events.</p>
<p>You can use the following APIs to create client logs which are then forwarded to the MobileFirst Operational Analytics server, where they can be searched and downloaded.</p>
<p>
{% highlight javascript  %}
// Set the log level to trace so that all logs are captured
WL.Logger.config({"level": "TRACE"});

// Create a client side log that is persisted locally until it is sent to the server
WL.Logger.trace("Create a client log at the TRACE level.");
WL.Logger.debug("Create a client log at the DEBUG level.");
WL.Logger.info("Create a client log at the INFO level.");
WL.Logger.warn("Create a client log at the WARN level.");
WL.Logger.error("Create a client log at the ERROR level.");
WL.Logger.fatal("Create a client log at the FATAL level.");
{% endhighlight %} </p>

<h2 id="analyticsLogs">Analytics Logs</h2>
<p>Client-side logs are captured based on the logging level that is set on the client. If you want to create analytics logs that are always captured regardless of the logging level, you can use the <code>WL.Analytics</code> API.</p>
<p>
{% highlight javascript  %}
// Create an analytics log message
WL.Analytics.log("Analytics log message");

// Create a custom activity
WL.Analytics.log({_activity: "customActivity"});

// Create a custom activity with a log message
WL.Analytics.log({_activity: "customActivity"}, "Analytics log message");
{% endhighlight %} </p>

<h2 id="sendingData">Sending data</h2>
<p>Logs that are captured by the client-side logging APIs and the <code>WL.Analytics</code> APIs are sent to the server automatically upon a successful server connection or a successful adapter call.</p>
<p>{% highlight javascript  %}
<p>// Logs sent upon successful connection
WL.Client.connect();

// Logs sent upon successful adapter invocation
WL.Client.invokeProcedure({...});
{% endhighlight %} </p>

<p>You can disable this automatic behavior by using the following call:</p>

<p>{% highlight javascript  %}
// Disable automatic sending of client and analytics logs
WL.Logger.config({autoSendLogs: false});
{% endhighlight %} </p>

<p>If you want to send this data more frequently, you can use the following API calls:</p>
<p>{% highlight javascript  %}
// Send client debug logs
WL.Logger.send();

// Send analytics logs
WL.Analytics.send();
{% endhighlight %} </p>

<h2 id="customCharts">Custom charts</h2>
<p>Custom charts are a new feature of MobileFirst Platform Operational Analytics 7.0. By using custom charts, you can take data that is already collected, like device ID, device model, device OS, etc., or log your own custom data and create charts. To understand how to log and send data, see <a href="#analyticsLogs">Analytics logs</a> and <a href="#sendingData">Sending data</a>.</p>
<h3>Chart types</h3>
<ul>
<li>Bar Graph</li>
<li>Flow Chart</li>
<li>Line Graph</li>
<li>Metric Group</li>
<li>Pie Chart</li>
<li>Table</li>
</ul>
<h2 id="creatingCustomChart">Creating a custom chart</h2>
<p>Creating a custom chart is simple. The following example walks you through creating a pie chart, based on your user location.</p>
<p>The messages that are logged to the Operational Analytics server in this example are hard-coded locations. Those messages look like this:</p>
<p>{% highlight javascript  %}
WL.Analytics.log({location: "USA"}, "visit");
WL.Analytics.log({location: "Mexico"}, "visit");
WL.Analytics.log({location: "Canada"}, "visit");
{% endhighlight %} </p>
<p>To create a chart, follow these steps.</p>
<ol>
<li>Go to the <strong>Custom Charts</strong> tab and click <strong>Add New Chart</strong>.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/MobileFirst-7-0-CustomChartsTab.png"/></p>
<p>The following dialog opens:<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/CreateNewChart-Screen1.png"/></p>
<p>As you fill out your information, more input fields are displayed.</p>
</li>
<li>Type a chart title.
</li>
<li>From the <strong>Event Type</strong> menu, select <strong>Custom Activities</strong>. No other option creates charts from the custom data sent to the server.
</li>
<li>Select a chart type. This example uses a pie chart.
</li>
<p>The last menu that becomes available depends on the chart type that you selected. In this example, the <strong>Property </strong>menu contains a list of the custom data that you created to send to the server, plus a few more. In this example, the <strong>location</strong> property is selected, as shown below.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/PieChartforCustomCharts.png"/></p>
<li>Click <strong>Save New Chart</strong>. The chart is saved under the <strong>Custom Charts</strong> tab in the main dashboard.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/CustomChartMainDashboard.png"/></li>
</ol>
