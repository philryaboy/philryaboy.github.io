---
layout: tutorial
title: Device provisioning concepts
relevantTo: [hybrid]
weight: 7
---
<h2>Overview</h2>
<p>Device provisioning is one of the most advanced and complex security features that IBM MobileFirst Platform Foundation provides.<br />
Device provisioning is the process of attaching a certificate to the device identity.<br />
Device identity (or in short – device ID) is similar to user identity, but is used to uniquely identify a specific device.<br />
Device identity is essential for various features, such as</p>
<ul>
<li>Push notifications – You want to know which device you are sending notification to.</li>
<li>Reports – You want to know how many devices are using your server.</li>
</ul>
<p>Knowing the device identity opens a wide array of security integration possibilities. For example, you can decide which devices are allowed to communicate with MobileFirst Server.<br />
In this tutorial, you learn what device provisioning is, what types of device provisioning are supported by IBM MobileFirst Platform Foundation and what artifacts are involved in the process of device provisioning.</p>
<p>This tutorial covers the following topics:</p>
<ul>
<li><a href="#types">Types of device provisioning</a></li>
<li><a href="#deviceid">Device ID</a></li>
<li><a href="#understand">Understanding device provisioning</a></li>
<li><a href="#none">No provisioning</a></li>
<li><a href="#auto">Auto provisioning</a></li>
<li><a href="#custom">Custom provisioning</a></li>
</ul>
<h2 id="types">Types of device provisioning</h2>
<p>IBM MobileFirst Platform Foundation supports three types of device provisioning:</p>
<ul>
<li>No provisioning</li>
<li>Auto provisioning</li>
<li>Custom provisioning</li>
</ul>
<p>This tutorial focuses on the first two types.<br />
For more information about custom provisioning, see <a title="Custom device provisioning" href="../../authentication-security/custom-device-provisioning/">Custom device provisioning</a>.</p>
<h2 id="deviceid">Device ID</h2>
<p>The device ID is automatically generated by the client-side framework when requested by MobileFirst Server.<br />
The device ID is used to uniquely identify a specific device with the server.<br />
Similar to the way a user ID is used for user authentication, the device ID is used for device authentication.<br />
Device provisioning is based on the device ID and supported on the Android and iOS platforms.</p>
<h2 id="understand">Understanding device provisioning</h2>
<p>Device provisioning is a process where a certificate is issued by MobileFirst Server for a specific device.<br />
The issued certificate contains device information that is obtained during the provisioning process.<br />
Before a certificate is issued to a specific device, the server can perform extra validations on the received device credentials.<br />
You can configure your own CA keystore for the generation of the device provisioning certificate.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/09_13_understanding-flow.png"/></p>
<h2 id="none">No provisioning</h2>
<p><strong>No provisioning</strong> is appropriate for development environments.<br />
Using <strong>No provisioning</strong> means that the provisioning process is not triggered (requested) by MobileFirst Server.<br />
The application obtains the device ID and sends it to the server as-is.<br />
The server does not validate whether this device is allowed to communicate with it.<br />
The certificate is not issued and not requested at any stage.<br />
No provisioning is the default setting for mobile applications.</p>
<ul>
<li>If you use the default security settings, you do not have to enable <strong>No provisioning</strong> manually.</li>
<li>If you use a custom security test to protect a resource that requires device identity and you want to use <strong>No provisioning</strong>, add the realm to your security test. For example:
<p>{% highlight xml  %}
<customSecurityTest name="customTests">
    ...
    <test realm="wl_anonymousUserRealm" isInternalUserID="true" />
    <test realm="wl_deviceNoProvisioningRealm" isInternalDeviceID="true" />
</customSecurityTest>
{% endhighlight %} 
</li>
</ul>
<h2 id="auto">Auto provisioning</h2>
<p><strong>Auto provisioning</strong> is an automated one-time process during which a certificate is issued by MobileFirst Server and sent to the client application.<br />
<strong>Auto provisioning</strong> is triggered by a server when it requests a provisioned device identity.<br />
The application obtains the device ID and starts an automated provisioning process.<br />
The server collects the supplied device information and issues a certificate by using the server-side CA keystore.<br />
The certificate is issued to any device that requests it, therefore <strong>Auto provisioning</strong> makes sense only when it is used after a successful application authenticity check.</p>
<h3>First application start</h3>
<p>Authenticity check is a proprietary MobileFirst technology, which makes sure that the application is the authentic one and was not modified by anyone.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/09_13_autoprov-firststart.png"/></p>
<h3>Subsequent application starts</h3>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/09_13_autoprov-subsequent.png"/></p>
<h3>Enabling auto provisioning</h3>
<p>To enable <strong>Auto provisioning</strong>, add the following realms to your <code>authentication-config.xml</code> file.</p>
<p>{% highlight xml  %}
<customSecurityTest name="customTests">
    ...
    <test realm="wl_authenticityRealm" />
    <test realm="wl_deviceAutoProvisioningRealm" isInternalDeviceID="true" />
</customSecurityTest>

<mobileSecurityTest name="mobileTests">
    ...
    <testAppAuthenticity/>
    <testDeviceId provisioningType="auto" />
</mobileSecurityTest>
{% endhighlight %} </p>
<h3>Keystore</h3>
<p>By default, MobileFirst Server uses its internal keystore to issue a certificate.<br />
You can tell the server to use your own keystore by adjusting the <code>worklight.properties</code> file.<br />
<strong>Note:</strong> The <code>wl.ca.keystore.path</code> property value can be either relative to the <code>/server/</code> folder of the MobileFirst project or absolute to the file system.</p>
<p>{% highlight bash %}
#######################################################################################################################
#    Worklight Default Certificate (For device provisioning)
#######################################################################################################################
# You can change the default behavior with regard to CA certificates. You can also implement custom provisioning.
# If you want to change the auto-provisioning mechanism to use different granularity (application, device or group) or a
# different list of pre-required realms, you can create your own customized authenticator, login module and challenge handler.
# For more information, see the "Custom Authenticator and Login Module" Getting Started training module.</p>
<p>#The path to the keystore, relative to the server folder in the Worklight Project, for example: conf/my-cert.jks
#wl.ca.keystore.path=
#The type of the keystore file. Valid values are jks or pkcs12.
#wl.ca.keystore.type=
#The password to the keystore file.
#wl.ca.keystore.password=
#The alias of the entry where the private key and certificate are stored, in the keystore.
#wl.ca.key.alias=
#The password to the alias in the keystore.
#wl.ca.key.alias.password=
#######################################################################################################################
#    Worklight SSL keystore
#######################################################################################################################
#SSL certificate keystore location.
ssl.keystore.path=conf/default.keystore
#SSL certificate keystore type (jks or PKCS12)
ssl.keystore.type=jks
#SSL certificate keystore password.
ssl.keystore.password=worklight
 {% endhighlight %} </p>
<p>You must use <strong>Auto provisioning</strong> together with <em>application authenticity</em> protection.<br />
For more information, see <a title="Application Authenticity Protection" href="../../authentication-security/application-authenticity-protection/">Application Authenticity Protection</a>.</p>
<h2 id="custom">Custom provisioning</h2>
<p><strong>Custom provisioning</strong> is an extension of Auto provisioning.<br />
With Custom provisioning, you can add custom CSR and certificate validation functions to define custom device provisioning rules.<br />
For more information, see <a title="Custom device provisioning" href="../../authentication-security/custom-device-provisioning/">Custom device provisioning</a>.</p>
