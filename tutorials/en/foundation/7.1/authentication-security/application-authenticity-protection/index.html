---
layout: tutorial
title: Application Authenticity Protection
show_children: true
weight: 9
relevantTo: [ios,android,windowsphone8,windows8,hybrid]
---
<h2 id="overview">Overview</h2>
<p>By issuing an HTTP request, any entity can access the HTTP services (APIs) that IBM MobileFirst Platform Foundation Server offers.<br />
The Application Authenticity Protection feature ensures that an application that tries to connect to a MobileFirst Server instance is the authentic one and was not tampered with or modified by a third-party attacker.</p>
<p>Application authenticity protection is available for:</p>
<ul>
<li>Android: native and hybrid</li>
<li>iOS: native and hybrid</li>
<li>Windows Universal: native and hybrid</li>
<li>Windows Phone Silverlight 8: hybrid only</li>
</ul>
<p><strong>Note:</strong><br />
Application Authenticity Protection is <strong>not available</strong> in the MobileFirst Development Server. To test, deploy the application to a MobileFirst Server instance on a remote application server.</p>
<h3>Agenda</h3>
<ul>
<li><a href="#authenticityFlowAndTypes">Authenticity flow and types</a></li>
<li><a href="#setup">Setting up authenticity</a></li>
</ul>
<h2 id="authenticityFlowAndTypes">Authenticity flow and types</h2>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/09_15_check_flow.jpg" /></p>
<p>The challenge token is processed by compiled native code, so that third-party attackers cannot see the logic of this processing.</p>
<p>Application Authenticity Protection is based on certificate keys that are used to sign the application bundles.<br />
Only the developer or the enterprise who have the original private key that was used to create the application are able to modify, repackage, and re-sign the bundle.</p>
<p>Three levels of authenticity are available:</p>
<ol>
<li>No Authenticity</li>
<li>Basic Authenticity</li>
<li>Extended Authenticity (Provides a more detailed verification and is more secured)</li>
</ol>
<h2 id="setup">Setting up authenticity</h2>
<p>To set up application authenticity protection, you go through the following two steps:</p>
<ol>
<li><a href="#projectLevelSetup">Project-level setup</a></li>
<li><a href="#environmentSpecificSetup">Environment-specific setup</a></li>
</ol>
<h3 id="projectLevelSetup">Project-level setup</h3>
<p>Whether you want Basic or Extended authenticity protection, the following setup steps are required.<br />
<em>Extended</em> authenticity protection requires additional setup steps, which are explained in the <a href="#enablingExtendedApplicationAuthenticityProtection">Enabling extended protection</a> section.</p>
<h4>Modify the <code>authenticationConfig.xml</code> configuration file</h4>
<ol>
<li>Add the relevant authentication realm to a security test.
<ul>
<li>If a <code>mobileSecurityTest</code> is used, add the <code>testAppAuthenticity</code> child element to it:<br />
{% highlight xml  %}
<mobileSecurityTest name="MyMobileAuthenticityTest">
  <testAppAuthenticity/>
  <testDeviceId provisioningType="none" />
  <testUser realm="myMobileLoginForm" />
</mobileSecurityTest>
{% endhighlight %}
</li>
<li>If a <code>customSecurityTest</code> is used, add the <code>wl_authenticityRealm</code> realm to it:<br />
{% highlight xml  %}
<customSecurityTest name="MyCustomAuthenticityTest">
  <test realm="wl_authenticityRealm" step="1"/>
  <test realm="wl_anonymousUserRealm" isInternalUserID="true" step="1"/>
  <test realm="wl_deviceNoProvisioningRealm" step="2" isInternalDeviceID="true"/>
</customSecurityTest>
{% endhighlight %}
</li>
</ul>
</li>
<li>After you have configured the authenticity realm and security check, go to <a href="#environmentSpecificSetup">Environment-specific setup</a> and select your environment to complete the authenticity configuration.</li>
</ol>
<h3 id="enablingExtendedApplicationAuthenticityProtection">Enabling extended application authenticity protection</h3>
<p>To enable extended authenticity checking, you must deploy a modified <code>.wlapp</code> file, instead of the original <code>.wlapp</code> file that is generated by the build process.</p>
<ol>
<li>Modify the <code>.wlapp</code> file by using the <code>wladm</code> program or the <code>wladm</code> Ant task: </li>
<ul>
<li><strong>By using the <code>wladm</code> program</strong><br />
Use the <code>wladm</code> program (provided in the MobileFirst installation directory) to run the <code>enable extended-authenticity</code> command:<br />
{% highlight java  %}
wladm enable extended-authenticity src-wlapp-file device-file > dest-wlapp-file
{% endhighlight %}</p>
<ul>
<li><code>src-wlapp-file</code> => Original binary app file (<code>.wlapp</code>)</li>
<li><code>device-file</code> => Binary mobile app file (<code>.apk</code>, <code>.ipa</code>, or <code>.xap</code>)</li>
<li><code>dest-wlapp-file</code> => Output binary app file (<code>.wlapp</code>)</li>
</ul>
<p>After running the <code>wladm</code>, deploy the resulting file to the MobileFirst Server instance.</p>
</li>
<li><strong>By using the <code>wladm</code> Ant task</strong><br />
Use the <code>wladm</code> Ant task (provided in the MobileFirst installation directory) to run the <code>enable-extended-authenticity</code> command:<br />
{% highlight xml  %}
<enable-extended-authenticity srcwlappfile="original-.wlapp-file"
    devicefile="device file(.apk, .ipa, or .xap)"
    destwlappfile="output-.wlapp-file"/>
{% endhighlight %}
  </li>
</ul>
<li>After running the <code>wladm</code> command or Ant task, deploy the resulting file to MobileFirst Server instance.</li>
</ol>
<p>You can use the MobileFirst Operations Console to see the authenticity level of an application.</p>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/ExtendedAuthenticityAndroid.png" /></p>
<blockquote><p>For more information, see the topic about configuring extended app authenticity checking, in the user documentation.</p></blockquote>
<h3 id="environmentSpecificSetup">Environment-specific setup</h3>
<p>For basic authenticity, go through the basic configuration steps.<br />
For extended authenticity, it is recommended to make these extra configuration changes.</p>
