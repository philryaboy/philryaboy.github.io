---
layout: tutorial
title: Configuring a native iOS application with the MobileFirst Platform SDK
relevantTo: [ios]
weight: 1
---
<h2>Overview</h2>
<p>Unlike MobileFirst Hybrid applications, which get autogenerated with the MobileFirst JavaScript SDK built-in, and can thus communicate with MobileFirst Server with no special customization, native apps are not bundled with the MobileFirst Native SDK by
    default.
</p>
<p>In this tutorial, you learn how to add the MobileFirst Native SDK to a native iOS application and set it up with additional required configuration files.</p>
<p>With the MobileFirst Native SDK, you can implement various features, such as connecting to the MobileFirst Server instance, calling adapter procedures, implementing authentication methods, certificate pinning, using push notifications, and more.</p>
<p>For a request from a native app to be recognized by MobileFirst Server, the client application must be registered to the MobileFirst Server instance.</p>
<p>In this tutorial, you learn how to deploy the server-side entity for the native iOS application.</p>
<p><strong>Prerequisites</strong></p>
<ul>
    <li>Proficiency with Apple Xcode IDE</li>
    <li>If you haven't gone through the <a href="../../advanced-client-side-development/using-cli-to-create-build-and-manage-mobilefirst-project-artifacts/">Command Line Interface tutorial</a>, do so now.</li>
</ul>
<blockquote><b>Note:</b> The <b>Keychain Sharing</b> capability is mandatory while running iOS apps in the iOS Simulator when using Xcode 8. You need to enable this capability manually before building the Xcode project.</blockquote>
<h3>Topics</h3>
<ul>
    <li><a href="#addingNativeSDK">Adding the MobileFirst Native SDK to an application</a></li>
    <li><a href="#serverEntity">Deploying the server-side entity to MobileFirst Server</a></li>
    <li><a href="#insideNativeApp">Inside a native application containing the MobileFirst Native SDK</a></li>
    <li><a href="#configSwiftApp">Configuring a Swift application</a></li>
    <li><a href="#next">Tutorials to follow next</a></li>
</ul>
<h2 id="addingNativeSDK">Adding the MobileFirst Native SDK to an application</h2>
<p>The MobileFirst Native SDK can be added using the following way:</p>
<ul>
    <li>Locally: Use either the MobileFirst Studio plug-in for Eclipse or the MobileFirst CLI tool.</li>
</ul>
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/native-ios-folder-structure.png" style="float:right" />
<h3 id="localMethod">"Classic" local method to add the MobileFirst Native SDK to an application</h3>
<p>If you use the local method, SDK files are generated from the existing local resources in the installed version of MobileFirst Platform Foundation. In the "Classic" method, the SDK files are referred to as "NativeAPI". Follow the instructions below for
    either the MobileFirst Studio plug-in for Eclipse or the MobileFirst CLI.</p>
<p>Using either Studio or CLI, create and deploy the NativeAPI server-side entity:</p>

<ol>
    <li>
        <h3>Studio</h3>
        <ol>
            <li>In MobileFirst Studio, create a MobileFirst project and add a MobileFirst Native API.</li>
            <li>In the <strong>New MobileFirst Native API</strong> dialog, enter your application name and select <strong>iOS</strong> for the <strong>Environment</strong> field.</li>
            <li>Right-click the generated <code>NativeAPI</code> folder (located in <code><em>your-projects</em>/apps/<em>your-nativeapi-app-name</em></code>) and select <strong>Run As > Deploy Native API</strong>.<br />
                <em>This action is required for MobileFirst Server to recognize the application if it attempts to connect.</em></li>
        </ol>
    </li>
    <li>
        <h3>CLI</h3>
        <ol>
            <li><a href="../../advanced-client-side-development/using-cli-to-create-build-and-manage-mobilefirst-project-artifacts/">Using the CLI</a>, create a new MobileFirst project: <code>$ mfp create HelloWorldNative</code></li>
            <li>Navigate to the newly created project directory: <code>$ cd HelloWorldNative/</code></li>
            <li>Add a new iOS native API: <code>$ mfp add api iOSHelloWorld -e ios</code></li>
            <li>Navigate to the Xcode project and run the command: <code>$ mfp push</code>.<br />
                <strong>Note:</strong> This action is required for MobileFirst Server to recognize the application if it attempts to connect.</li>
        </ol>
    </li>
    <li>Copy the files to the native iOS application:
        <ol>
            <li>Copy the previously-created <code>WorklightAPI</code> folder and the <code>worklight.plist</code> file from Eclipse or the CLI-generated folder to the root of the native project in Xcode.<br />
                <img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/xcode-link-libraries-300x216.png" /></li>
            <li>In the Xcode Build Phases section, link the following libraries in your native iOS application:
                <ul>
                    <li>SystemConfiguration.framework</li>
                    <li>MobileCoreServices.framework</li>
                    <li>CoreData.framework</li>
                    <li>CoreLocation.framework</li>
                    <li>Security.framework</li>
                    <li>SQLCipher.framework <em>(from WorklightAPI/Frameworks)</em></li>
                    <li>openssl.framework <em>(from WorklightAPI/Frameworks)</em></li>
                    <li>IBMMobileFirstPlatformFoundation.framework <em>(from WorklightAPI/Frameworks)</em></li>
                    <li>libstdc++.6.tbd</li>
                    <li>libz.tbd</li>
                    <li>libc++.tbd</li>
                </ul>
            </li>
            <li>In Xcode <strong>Build Settings</strong>:
                <ul>
                    <li>In <strong>Framework Search Paths</strong>, add the following path: <code>$(SRCROOT)/WorklightAPI/Frameworks</code></li>
                    <li>In <strong>Other Linker Flags</strong>, add <code>-ObjC</code>.</li>
                    <li>In the <strong>Deployment</strong> section, for the iOS <strong>Deployment Target</strong> field, select a value that is greater than, or equal to, 6.0.</li>
                </ul>
            </li>
        </ol>
    </li>
</ol>
<blockquote>
    <p>For more information, see the topics about developing native applications for iOS, in the user documentation.</p>
</blockquote>
<!--<p>The preferred method is by using CocoaPods, as explained next. For the "Classic" local method, see <a href="#localMethod">the local method</a> section.</p>
<ol>
    <li>Create a Xcode project or use an existing one.</li>
    <li>If <a href="http://guides.cocoapods.org">CocoaPods</a> is not installed in your development environment, install it as follows:
        <ol>
            <li>Open <strong>Terminal</strong>.</li>
            <li>Run the command: <code>sudo gem install cocoapods</code></li>
            <li>Run the command: <code>pod setup</code> - <strong>Note:</strong> This command may take several minutes to complete.</li>
        </ol>
    </li>
    <li>Change directory to the location of the Xcode project.</li>
    <li>Run the command: <code>pod init</code>. This creates a <code>Podfile</code>.</li>
    <li>Using your favorite editor, open the <code>Podfile</code> file, located at the root of the project.</li>
    <li>Comment out or remove the contents of the file.</li>
    <li>Add the following lines and save the changes:<br /> {% highlight bash %} pod 'IBMMobileFirstPlatformFoundation', '~> 7.1.3' {% endhighlight %}
    </li>
    <li>Run the command: <code>pod install</code>. This command adds the MobileFirst Native SDK, generates the Pod project, and integrates it with the Xcode project.<br />
        <strong>Note:</strong> This command may take several minutes to complete.</li>
    <li>
        <blockquote><strong>Important</strong>: From here on, use the <code>[ProjectName].<strong>xcworkspace</strong></code> file in order to open the project in Xcode. Do <strong>not</strong> use the <code>[ProjectName].<strong>xcodeproj</strong></code> file. A
            CocoaPods-based project is managed as a workspace containing the application (the executable) and the library (all project dependencies that are pulled by the CocoaPods manager).</p>
        </blockquote>
    </li>
    <li>Open the Xcode project by double-clicking the <strong>.xcworkspace</strong> file.</li>
    <li>Whenever you want to use the MobileFirst Native SDK, make sure that you import the framework:<br /> {% highlight objc %} #import
        <IBMMobileFirstPlatformFoundation/IBMMobileFirstPlatformFoundation.h>
            {% endhighlight %}
    </li>
</ol>
<blockquote>
    <p>If you use Xcode 7 and iOS 9, read the <a href="{{site.baseurl}}/blog/2015/09/09/ats-and-bitcode-in-ios9/">ATS and Bitcode</a> blog post.</p>
</blockquote>-->
<h2 id="serverEntity">Deploying the server-side entity to MobileFirst Server</h2>
<p>Now that the native application is set up with the MobileFirst Native SDK, it is also required that MobileFirst Server recognize it after the SDK is used in the application. For this, a MobileFirst Server instance and a MobileFirst project are needed.</p>
<h3>Creating a project and server instance</h3>
<p>In <strong>Terminal</strong>, navigate to the location where you want to create the MobileFirst Backend project and run the following commands:</p>
<p>{% highlight bash %} mfp create your-project-name-here cd your-project-name mfp start {% endhighlight %}</p>
<p>After the project is created and the server is running, the server-side entity can be created and deployed to the server.<br /> The next step adds the following files to the native directory, as explained in the next section: <code>worklight.plist</code>,
    <code>application-descriptor.xml</code>, <code>mobilefirst</code> folder.</p>
<p>Make sure to add <code>worklight.plist</code> to your XCode project: Right-click the project and select <strong>Add Files To [ProjectName]</strong>, select the <code>worklight.plist</code>, located in the root folder of the Xcode project.</p>
<h3>Deploying the server-side entity</h3>
<ol>
    <li>In <strong>Terminal</strong>, navigate to the Xcode project.</li>
    <li>Run the command: <code>mfp push</code><br /> The command asks to which MobileFirst Server instance you want to deploy the artifacts and update the <code>wlclient.properties</code> file accordingly with the server address.</p>
        <p> An Interactive menu guides you, prompting you to provide the required values: application name, initial version number, and which bundle ID to use. You can edit these values again later in the <code>worklight.plist</code> and <code>application-descriptor.xml</code>            files. You can also edit them by using the CLI command <code>mfp config</code>.</li>
</ol>
<h2 id="insideNativeApp">Inside a native application containing the MobileFirst Native SDK</h2>
<p>In addition to the reconfigured project, now containing the MobileFirst Native SDK, three artifacts were added: the <code>worklight.plist</code> file, the application descriptor, and the <code>mobilefirst</code> folder.</p>
<h3 id="worklight-plist">worklight.plist</h3>
<p>The <code>worklight.plist</code> file, located at the root of the project, holds server configuration properties and is user-editable:</p>
<ul>
    <li><code>protocol</code> – The communication protocol to MobileFirst Server, which is either <code>http</code> or <code>https</code>.</li>
    <li><code>host</code> – The hostname of the MobileFirst Server instance.</li>
    <li><code>port</code> – The port of the MobileFirst Server instance.</li>
    <li><code>wlServerContext</code> – The context root path of the application on the MobileFirst Server instance.</li>
    <li><code>application id</code> – The application ID as defined in the <code>application-descriptor.xml</code> file.</li>
    <li><code>application version</code> – The application version.</li>
    <li><code>environment</code> – The target environment of the native application (“iOSnative”).</li>
    <li><code>wlUid</code> – This property is used by Mobile Test Workbench (deprecated feature) to identify it as a MobileFirst application.</li>
    <li><code>wlPlatformVersion</code> – The MobileFirst Studio version.</li>
</ul>
<h3>Application descriptor</h3>
<p>The <code>application-descriptor.xml</code> file, located at the root of the project, is a metadata file that you use to define various aspects of the application, such as user identity realms and push notifications support, security settings that MobileFirst
    Server enforces, and more.</p>
<h3>The mobilefirst folder</h3>
<p>The <code>mobilefirst</code> folder, located at the root of the project contains <code>.wlapp</code> files. These files are the server-side entities that are deployed to the MobileFirst Server.</p>
<h2 id="configSwiftApp">Configuring a Swift application</h2>
<p>Because Apple Swift is designed to be compatible with Objective-C, you can use the MobileFirst SDK from within an iOS Swift project, too.</p>
<ol>
    <li>Create a Swift project and follow the same steps, as described at the beginning of the tutorial, to install the MobileFirst SDK into an iOS native application.
        <p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/02_02_new_swift.png" />
    </li>
    <li>
        Use <code>import IBMMobileFirstPlatformFoundation</code> in any class that needs to use the MobileFirst SDK.
    </li>
</ol>
<p>All the MobileFirst classes are now available from any of your Swift files.<br /> XCode provides code autocompletion, converted to the Swift style.<br />
    <img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/02_02_swift-autocomplete.png" /></p>
<h2 id="next">Tutorials to follow next</h2>
<p>Now that your application contains the Native API library, you can follow the tutorials in the <a href="../../ios-tutorials">Native iOS development</a> category to learn more about authentication and security, server-side development, advanced client-side
    development, notifications, and more.</p>
