---
layout: tutorial
title: Configuring a native Android application with the MobileFirst Platform SDK
relevantTo: [android]
weight: 2
---
<h2>Overview</h2>
<p>Unlike MobileFirst Hybrid applications, which get autogenerated with the MobileFirst JavaScript SDK built-in and are thus capable to communicate with the MobileFirst Server out-of-the-box, native apps are not bundled with the MobileFirst Native SDK by default.</p>
<p>In this tutorial, you learn how to add the MobileFirst Native SDK to a native Android application and set it up with additional required configuration files.</p>
<p>By using MobileFirst Native SDK, you can implement various features, such as: connecting to the MobileFirst Server instance, calling adapter procedures, implementing authentication methods, certificate pinning, using push notifications, and more.</p>
<p>For a request from a native app to be recognized by MobileFirst Server, the client application must be registered to the MobileFirst Server instance.</p>
<p>In this tutorial, you learn how to deploy the server-side entity for the native Android application.</p>
<p><strong>Prerequisite</strong></p>
<ul>
<li>Proficiency with the Google Android Studio</li>
<li>If you haven't gone through the <a href="../../advanced-client-side-development/using-cli-to-create-build-and-manage-mobilefirst-project-artifacts/">Command Line Interface tutorial</a>, do so now.</li>
</ul>
<h3>Agenda</h3>
<ul>
<li><a href="#addingNativeSDK">Adding the MobileFirst Native SDK to an application</a></li>
<li><a href="#serverEntity">Deploying the server-side entity to MobileFirst Server</a></li>
<li><a href="#insideNativeApp">Inside a native application containing the MobileFirst Native SDK</a></li>
<li><a href="#next">Tutorials to follow next</a></li>
</ul>
<h2 id="addingNativeSDK">Adding the MobileFirst Native SDK to an application</h2>
<p>The MobileFirst Native SDK can be added in several ways: from a remote MavenCentral repository, ensuring you always use the latest available version, or locally by using either MobileFirst Studio plug-in for Eclipse or the MobileFirst CLI tool. The preferred method is by using Jcenter, explained next. For the "Classic" local method, see the <a href="#localMethod">local method</a> section.</p>
<ol>
<li>Create an Android Studio project or use an existing one.</li>
<li>In <strong>Project > Gradle scripts</strong>, select <strong>build.gradle (Module: app)</strong>.</li>
<li>Add the following lines below <code>apply plugin: 'com.android.application'</code>:<br />
{% highlight xml  %}
repositories{
    jcenter()
}
{% endhighlight %}</li>
<li>Add the following inside <code>android</code>:<br />
{% highlight xml  %}
packagingOptions {
    pickFirst 'META-INF/ASL2.0'
    pickFirst 'META-INF/LICENSE'
    pickFirst 'META-INF/NOTICE'
}
{% endhighlight %}</li>
<li>Add the following lines inside <code>dependencies</code>:<br />
{% highlight xml  %}
compile group: 'com.ibm.mobile.foundation',
name: 'ibmmobilefirstplatformfoundation',
version: '7.1.0.0',
ext: 'aar',
transitive: true
{% endhighlight %}</li>
<li>Add the following permissions to the <code>AndroidManifest.xml</code> file:<br />
{% highlight xml  %}
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.GET_TASKS" />
{% endhighlight %}</li>
<li>Add the MobileFirst UI activity:<br />
{% highlight xml  %}
<activity android:name="com.worklight.wlclient.ui.UIActivity" />
{% endhighlight %}</li>
</ol>
<h2 id="serverEntity">Deploying the server-side entity to MobileFirst Server</h2>
<p>Now that the native application is set up with the MobileFirst Native SDK, it is also required that MobileFirst Server recognize it after the SDK is used in the application. For this, you need a MobileFirst Server instance and a MobileFirst project:</p>
<h3>Creating a project and server instance</h3>
<p>In <strong>Terminal</strong>, navigate to the location where you want to create the MobileFirst Backend project and run the following commands:</p>
<p>{% highlight bash %}
mfp create your-project-name-here
cd your-project-name
mfp start
{% endhighlight %}</p>
<p>After the project is created and the server is running, the server-side entity can be created and deployed to the server.<br />
The next step adds the following files to the native project, as explained in <a href="#insideNativeApp">Inside a native application containing the MobileFirst Native SDK</a>: <code>wlclient.properties</code>, <code>application-descriptor.xml</code>, <code>mobilefirst</code> folder.</p>
<h3>Deploying the server-side entity</h3>
<ol>
<li>In <strong>Terminal</strong>, navigate to the root of the Android Studio project.</li>
<li>Run the command: <code>mfp push</code><br />
    The command asks to which MobileFirst Server you want to deploy the artifacts and update the <code>wlclient.properties</code> file accordingly with the server address. You can later edit these settings again manually if necessary. You can also edit the files by using the CLI command <code>mfp config</code>.</li>
</ol>
<h2 id="insideNativeApp">Inside a native application containing the MobileFirst Native SDK</h2>
<p>In addition to the reconfigured project, now containing the MobileFirst Native SDK, three artifacts were added:</p>
<h3 id="wlclient-properties">wlclient.properties</h3>
<p>The <code>wlclient.properties</code> file, located in the <code>android-studio-project\app\src\main</code> folder, holds server configuration properties and is user-editable:</p>
<ul>
<li><code>wlServerProtocol</code> – The communication protocol to MobileFirst Server, which can be either <code>http</code> or <code>https</code>.</li>
<li><code>wlServerHost</code> – The hostname of MobileFirst Server.</li>
<li><code>wlServerPort</code>  – The port of MobileFirst Server.</li>
<li><code>wlServerContext</code> – The context root path of the application on MobileFirst Server.</li>
<li><code>wlAppId</code> – The application ID as defined in the <code>application-descriptor.xml</code> file.</li>
<li><code>wlAppVersion</code> – The application version.</li>
<li><code>wlEnvironment</code> – The target environment of the native application.</li>
<li><code>wlUid</code> – The property used by MTWW, the test workbench, to identify this as a MobileFirst application.</li>
<li><code>wlPlatformVersion</code> – The MobileFirst SDK version.</li>
<li><code>languagePreferences</code> – The list of preferred locales.</li>
<li><code>GcmSenderId</code>  – This property defines the Google Cloud Message (GCM) Sender ID to be used for push notifications. By default, this property is commented out.</li>
</ul>
<h3>Application descriptor</h3>
<p>The <code>application-descriptor.xml</code> file, located at the root of the project, is a metadata file that is used to define various aspects of the application, such as user identity realms and push notifications support, security settings that MobileFirst Server enforces, and more.</p>
<h3><code>mobilefirst</code> folder</h3>
<p>The <code>mobilefirst</code> folder, located at the root of the project contains .wlapp files. These are the server-side entities that are deployed to the MobileFirst Server.</p>
<h2 id="next">Tutorials to follow next</h2>
<p>Now that your application contains the Native API library, you can follow the tutorials in the <a href="../../android-tutorials/">Native Android Development</a> section to learn more about authentication and security, server-side development, advanced client-side development, notifications and more.</p>
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/02_03_android_native_folder_structure-7-0.png" style="float:right"/>
<h2 id="localMethod">"Classic" local method to add the MobileFirst Native SDK to an application</h2>
<p>When using the local method, this means that the SDK files will be generated from the existing local resources in the installed version of MobileFirst Platform Foundation. In the "Classic" method, the SDK files are referred to as "NativeAPI". Follow the instructions below for either the MobileFirst Studio plug-in for Eclipse or MobileFirst CLI.</p>
<p>Using either Studio or CLI, create and deploy the NativeAPI server-side entity: <br />
</p>
<ol>
<li>
<h3>Studio</h3>
<ol>
<li>In MobileFirst Studio, create a MobileFirst project and add a MobileFirst Native API.</li>
<li>In the <strong>New MobileFirst Native API</strong> dialog, enter your application name and select <strong>Android</strong> for the <strong>Environment</strong> field.</li>
<li>Right-click the generated NativeAPI folder (located in <code><em>your-projects</em>/apps/<em>your-nativeapi-app-name</em></code>) and select <strong>Run As > Deploy Native API</strong>.<br />
<strong>Note:</strong> This action is required for MobileFirst Server to recognize the application when a request reaches the server.</li>
</ol>
</li>
<li>
<h3>CLI</h3>
<ol>
<li>In the terminal with the <a href="../../advanced-client-side-development/using-cli-to-create-build-and-manage-mobilefirst-project-artifacts/" title="Updated: Using CLI to create, build, and manage MobileFirst project artifacts">CLI</a> installed, create a new MobileFirst project: <code>$ mfp create HelloWorldNative</code></li>
<li>Go to the newly created project directory: <code>$ cd HelloWorldNative/</code></li>
<li>Add a new Android native API: <code>$ mfp add api AndroidHelloWorld -e android</code></li>
<li>navigate to the Android project and run the command: <code>$ mfp push</code>.<br />
<em>This action is required for MobileFirst Server to recognize the application if it attempts to connect.</em></li>
</ol>
</li>
<li>Copy the <code>worklight-android.jar</code>, <code>uicandroid.jar</code>, <code>bcprov.jar</code>, and <code>android-async-http.jar</code> files from the generated NativeAPI folder to the new native Android application, in the <code>/libs</code> directory.</li>
<li> [Android Studio only] Right-click any of the added <code>.jar</code> files and select <strong>Add as library</strong> to add all libraries.</li>
<li> [Android Studio only] Create an <code>assets</code> folder under <code>src\main</code>.</li>
<li>Copy the <code>wlclient.properties</code> file from the previously created MobileFirst native API folder to the new native Android application, in the <code>/assets</code> directory.</li>
<li>Add the following permissions to the <code>AndroidManifest.xml</code> file:
<p>{% highlight xml  %}
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.GET_TASKS" />
{% endhighlight %}</li>
<li>Add the MobileFirst UI activity:<br />
{% highlight xml  %}
<activity android:name="com.worklight.wlclient.ui.UIActivity" />
{% endhighlight %}</li>
</ol>
<p>The NativeAPI contains the following components:</p>
<ul>
<li>The <code>wlclient.properties</code> file contains the connectivity settings that a native Android application uses.</li>
<li>The <code>worklight-android.jar</code> file is the MobileFirst API library.</li>
<li>The <code>push.png</code> file is used for displaying an image for an incoming push notification.</li>
<li>The <code>proguard-project.txt</code> file contains configuration settings for using Android ProGuard with Android Native API.</li>
<li>The <code>JSONStore</code> folder is for optional JSONStore support in native applications.</li>
<li>The <code>armabi</code>, <code>armabi-v7a</code>, <code>mips</code>, and <code>x86</code> folders are for application authenticity protection (optional) in native applications.</li>
<li>As with any MobileFirst project, you create the server configuration by modifying the files that are in the <code>server\conf</code> folder.</li>
<li>You use the <code>application-descriptor.xml</code> file to define application metadata and to configure security settings that MobileFirst Server enforces.</li>
</ul>
<blockquote><p>For more information, see the topic about developing native applications for Android, in the user documentation.</p></blockquote>
