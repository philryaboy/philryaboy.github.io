---
layout: tutorial
title: カスタム・グラフの作成
breadcrumb_title: Custom Charts
relevantTo: [ios,android,javascript]
weight: 3
---
<!-- NLS_CHARSET=UTF-8 -->
## 概説
{: #overview }

カスタム・グラフを使用すると、分析データ・ストア内の収集した分析データを、{{ site.data.keys.mf_analytics_console }}でデフォルトでは使用できないグラフで視覚化できます。 この視覚化フィーチャーは、ビジネスに不可欠なデータを分析するためのパワフルな手段です。

使用可能なカスタム・グラフ・タイプ: **「アプリケーション・セッション」**、**「ネットワーク・トランザクション」**、**「プッシュ通知」**、**「クライアント・ログ」**、**「サーバー・ログ」**、**「カスタム・データ」**。

#### ジャンプ先
{: #jump-to }

* [カスタム・グラフの作成](#creating-a-custom-chart)
* [グラフ・タイプ](#chart-types)
* [クライアント・ログのカスタム・グラフの作成](#creating-custom-charts-for-client-logs)
* [カスタム・グラフ・データのエクスポート](#exporting-custom-chart-data)
* [カスタム・グラフ定義のエクスポートおよびインポート](#exporting-and-importing-custom-chart-definitions)

## カスタム・グラフの作成
{: #creating-a-custom-chart }

{{ site.data.keys.mf_analytics_console }}の**「ダッシュボード」**パネルから、カスタム・グラフ作成ビルダーで以下の 4 つの主な段階で設定を行っていきます。

### 1. 「一般設定」
{: #1-general-settings }

**「カスタム・グラフ」**タブで**「グラフの作成」**ボタンをクリックします。  

**「一般設定」**タブで、「グラフ・タイトル」、「イベント・タイプ」、および「グラフ・タイプ」を選択します。  
「イベント・タイプ」と「グラフ・タイプ」を選択すると、**「グラフの定義」**タブが表示されます。

### 2. 「グラフの定義」タブ
{: #2-the-chart-definition-tab }

**「グラフの定義」**タブを使用して、以前に選択したグラフ・タイプのグラフを定義します。 グラフを定義したら、グラフのフィルターとグラフのプロパティーを設定できます。

### 3. 「グラフのフィルター」タブ
{: #3-the-chart-filters-tab }

**「グラフのフィルター」**は、カスタム・グラフを細かく調整するために使用します。 グラフには、複数のフィルターを定義できます。  
例えば、特定アプリケーションの平均アプリケーション・セッション所要時間を表示したい場合は、以下のオプションを指定できます。

1. **「プロパティー」**に**「アプリケーション名」**を選択します。
2. **「演算子」**には**「等しい」**を選択します。
3. **「値」**にアプリケーションの名前を選択します。
4. **「フィルターの追加」**をクリックします。

グラフのフィルターの表にアプリケーション名のフィルターが追加されます。

### 4. 「グラフのプロパティー」
{: #4-chart-properties }

**「表」**、**「棒グラフ」**、および**「折れ線グラフ」**のグラフ・タイプについて、グラフのプロパティーがあります。 グラフのプロパティーは、データの表示方法を向上させて効果的に視覚化することが目的です。

**「表」グラフ**を作成した場合は、グラフのプロパティーを設定して、表ページ・サイズ、ソート基準フィールド、フィールドのソート順序を定義できます。

**「棒グラフ」**または**「折れ線グラフ」** のグラフを作成した場合は、グラフのプロパティーを設定して、しきい値の線にラベル付けし、グラフをモニターする際の参照フレームを追加することができます。

<img class="gifplayer"  alt="カスタム・グラフの作成" src="creating-custom-charts.png"/>

## グラフ・タイプ
{: #chart-types }

### 棒グラフ
{: #bar-graph }

棒グラフは、X 軸上で数値データを視覚化できます。 棒グラフを定義する場合、まず、「X 軸」の値を選択してください。 次の可能な値から選択できます。

* **タイムライン (Timeline)** - データをトレンドで表示する場合 (例えば、経時的な平均アプリケーション・セッション所要時間など)、「X 軸」に「タイムライン (Timeline)」を選択します。
* **プロパティー** - 特定プロパティーのカウント明細を表示したい場合は、「プロパティー」を選択します。 「X 軸」に「プロパティー」を選択すると、「Y 軸」に「合計」が暗黙的に選択されます。 例えば、「X 軸」に「プロパティー」を選択し、「プロパティー」に「アプリケーション名」を選択すると、指定したイベント・タイプのカウントが、アプリケーション名ごとの内訳で示されます。

「X 軸」の値を定義したら、「Y 軸」の値を定義できます。 「X 軸」に「タイムライン (Timeline)」を選択した場合、「Y 軸」に以下の可能な値を選択できます。

* **平均** - 指定されたイベント・タイプでの数値プロパティーの平均。
* **合計** - 指定されたイベント・タイプでのプロパティーの合計カウント。
* **固有** - 指定されたイベント・タイプでのプロパティーの固有カウント。

グラフの軸を定義したら、「プロパティー」の値を選択してください。

### 折れ線グラフ
{: #line-graph }

折れ線グラフにより、経時的に特定のメトリックを視覚化できます。 このグラフ・タイプは、経時的なトレンドに関してデータを視覚化する場合に役立ちます。 折れ線グラフの作成時にまず定義する値は「測定 (Measure)」で、これには以下の値が可能です。

* **平均** - 指定されたイベント・タイプでの数値プロパティーの平均。
* **合計** - 指定されたイベント・タイプでのプロパティーの合計カウント。
* **固有** - 指定されたイベント・タイプでのプロパティーの固有カウント。

測定を定義したら、「プロパティー」の値を選択してください。

### フローチャート
{: #flow-chart }

フローチャートにより、プロパティー間のフローの明細を視覚化できます。 フローチャートには、以下のプロパティーを設定する必要があります。

* **ソース** - ダイアグラム内のソース・ノードの値。
* **宛先** - ダイアグラム内の宛先ノードの値。
* **プロパティー** - ソース・ノードまたは宛先ノードのプロパティー値。

フローチャートでは、さまざまなソースから宛先へのフロー (その逆も同様) の密度明細を表示できます。 例えば、あるアプリケーションに関するログ重大度の明細を表示する場合は、以下の値を定義できます。

* 「ソース」に「アプリケーション名」を選択します。
* 「宛先」に「ログ・レベル」を選択します。
* 「プロパティー」にアプリケーションの名前を選択します。

### メトリック・グループ
{: #metric-group }

メトリック・グループでは、平均値、合計カウント、または固有カウントとして測定された 1 つのメトリックを視覚化できます。 メトリック・グループを定義するには、「測定 (Measure)」に可能な値の 1 つを定義する必要があります。

* **平均** - 指定されたイベント・タイプでの数値プロパティーの平均。
* **合計** - 指定されたイベント・タイプでのプロパティーの合計カウント。
* **固有** - 指定されたイベント・タイプでのプロパティーの固有カウント。

測定を定義したら、「プロパティー」の値を選択してください。 このメトリックが、メトリック・グループに表示されます。

### 円グラフ
{: #pie-chart }

円グラフでは、特定プロパティーの値のカウント明細を視覚化できます。 例えば、異常終了の明細を表示するには、以下の値を定義します。

* 「イベント・タイプ」に「アプリケーション・セッション (App Session)」を選択します。
* 「グラフ・タイプ」に「円グラフ」を選択します。
* 「プロパティー」に「終了者 (Closed By)」を選択します。

生成される円グラフには、異常終了したアプリケーション・セッションと対照して、ユーザーが終了したアプリケーション・セッションの明細が表示されます。

### 表
{: #table }

生データを表示する場合には、表が便利です。 表を構築するには、表示する生データの列を追加するだけです。  
特定のイベント・タイプにすべてのプロパティーが必要とは限らないため、表には NULL 値が出現する可能性があります。 これらの行が表に出現しないようにするには、「グラフのフィルター」タブで特定プロパティーに「存在する」のフィルターを追加します。

## クライアント・ログのカスタム・グラフの作成
{: #creating-custom-charts-for-client-logs }

プラットフォームの Logger API で送信されたログ情報が入ったクライアント・ログのカスタム・グラフを作成できます。  
ログ情報には、デバイスに関するコンテキスト情報 (環境、アプリケーション名、アプリケーション・バージョンなど) も含まれます。

> **注:** カスタム・グラフのデータを設定するには、カスタム・イベントをログに記録する必要があります。 クライアント・アプリケーションからのカスタム・イベントの送信については、[『カスタム・データのキャプチャー』](../../analytics-api/#custom-events)を参照してください。

1. クライアント・アプリケーションから、キャプチャーしたログをサーバーに送信することで、データを設定します。 [『キャプチャーされたログの送信』](../../analytics-api/#sending-analytics-data)を参照してください。
2. {{ site.data.keys.mf_analytics_console }}で、**「カスタム・グラフ」**タブをクリックし、以下でグラフの作成を続行します。
    * **グラフのタイトル**: アプリケーションおよびログ・レベル
    * **イベント・タイプ**: クライアント・ログ
    * **グラフ・タイプ**: フローチャート

3. **「グラフの定義」**タブをクリックし、以下の値を入力します。
    * **ソース**: アプリケーション名
    * **宛先**: ログ・レベル
    * **プロパティー**: 対象のアプリケーション名

4. **「保存」**ボタンをクリックします。

## カスタム・グラフ・データのエクスポート
{: #exporting-custom-chart-data }

カスタム・グラフに表示されたデータをダウンロードできます。  

![これらのアイコンを使用したカスタム・グラフのデータのエクスポート](export-data.png)

* **URL によるエクスポート (Export with URL)** - チェーン・リンクの形のアイコン
* **グラフのダウンロード (Download Chart)** - 下矢印の形のアイコン
* **グラフの編集 (Edit Chart)** - 鉛筆の形のアイコン
* **グラフの削除 (Delete Chart)** - ごみ箱の形のアイコン

**「グラフのダウンロード (Download Chart)」**アイコンをクリックして、{{ site.data.keys.mf_analytics_console_short }} から JSON フォーマットのファイルをダウンロードします。  
**「URL によるエクスポート (Export with URL)」**アイコンをクリックして、HTTP クライアントから呼び出すための {{ site.data.keys.mf_analytics_console_short }} からのエクスポート・リンクを生成します。 指定された時間間隔でエクスポート・プロセスを自動化するスクリプトを作成する場合に、このオプションが便利です。

## カスタム・グラフ定義のエクスポートおよびインポート
{: #exporting-and-importing-custom-chart-definitions }

{{ site.data.keys.mf_analytics_console_short }} 内のカスタム・グラフ定義は、エクスポートおよびインポートが可能です。 テスト環境から実動デプロイメントに移行する場合に、新しいクラスター用のカスタム・グラフを再作成するのではなく、カスタム・グラフ定義をエクスポートすることで、時間を節約できます。

1. {{ site.data.keys.mf_analytics_console_short }}のダッシュボードで**「カスタム・グラフ」**タブをクリックします。
2. **「グラフのエクスポート (Export Charts)」**をクリックして、グラフ定義が入った JSON ファイルをダウンロードします。
3. 場所を選択して JSON ファイルを保存します。
4. **「グラフのインポート (Import Charts)」**をクリックして JSON ファイルをインポートします。 既に存在するカスタム・グラフ定義をインポートすると、重複した定義が生成されます。これにより、{{ site.data.keys.mf_analytics_console_short }} に、重複したカスタム・グラフが表示されることになります。
