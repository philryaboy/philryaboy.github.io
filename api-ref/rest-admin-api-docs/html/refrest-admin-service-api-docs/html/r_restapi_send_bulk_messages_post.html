<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" flippy="dippy" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2017" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2017" />
<meta name="DC.Type" content="reference" />
<meta name="DC.Title" content="Send Bulk Messages (POST)" />
<meta name="abstract" content="Send bulk messages by specifying various options." />
<meta name="Description" content="Send bulk messages by specifying various options." />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="Send-Bulk-Messages--POST-" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<meta name='DC.subject' content='SSHSCD'/>
<meta name="IBM.WTMSite" content="ESTKCS"/>
<meta name="IBM.WTMCategory" scheme="IBM_WTMCategory" content="ELSKCS"/>
<script type="text/javascript" src="//www.ibm.com/common/stats/ida_production.js"></script>
<style>
  ul {
     line-height: 30px;
  }

  li a {
     font-weight: bold;
     color: blue;
  }
</style>
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="ibmdita.css" />
<title>Send Bulk Messages (POST)</title>
</head>
<body id="Send-Bulk-Messages--POST-"><div role="main">

<h1 class="title topictitle1" id="ariaid-title1"> Send Bulk Messages (POST) </h1>



<div class="body refbody"><p class="shortdesc">Send bulk messages by specifying various options.</p>

<section class="section"><h2 class="title sectiontitle">Roles</h2>

<p class="p">Users in the following roles are authorized to perform this operation:</p>

<ul class="ul">
<li class="li"><span class="keyword parmname parmname">mfpadmin</span></li>

<li class="li"><span class="keyword parmname parmname">mfpdeployer</span></li>

<li class="li"><span class="keyword parmname parmname">mfpoperator</span></li>

</ul>

</section>


<section class="section"><h2 class="title sectiontitle"> Method </h2>

<p class="p"><code class="ph codeph">POST</code></p>

</section>



<section class="section"><h2 class="title sectiontitle">Path</h2>

<p class="p">/management-apis/2.0/runtimes/<var class="keyword varname">runtime-name</var>/notifications/applications/<var class="keyword varname">application-name</var>/messages/bulk</p>

</section>


<div class="example"><h2 class="title sectiontitle">Example</h2>

<pre class="pre codeblock prettyprint"><code>https://www.example.com/mfpadmin/management-apis/2.0/runtimes/myruntime/notifications/applications/myapplication/messages/bulk?locale=de_DE</code></pre>
</div>


<section class="section"><h2 class="title sectiontitle">Path Parameters</h2>

<dl class="dl parml">
<dt class="dt pt dlterm">runtime-name</dt>

<dd class="dd pd">The name of the runtime. This is the context root of the runtime web application, without the leading slash.</dd>

<dt class="dt pt dlterm">application-name</dt>

<dd class="dd pd">The name of the application.</dd>

</dl>
</section>


<section class="section"><h2 class="title sectiontitle">Query Parameters</h2>

<p class="p">Query parameters are optional.</p>
<dl class="dl parml">
<dt class="dt pt dlterm">locale</dt>

<dd class="dd pd">The locale used for error messages.</dd>

</dl>
</section>


<section class="section"><h2 class="title sectiontitle">Consumes</h2>

<p class="p">
application/json, application/xml, text/xml</p>

</section>


<section class="section"><h2 class="title sectiontitle">Produces</h2>

<p class="p">
application/json, application/xml, text/xml</p>

</section>


<section class="section"><h2 class="title sectiontitle">Payload</h2>

<p class="p">
</p>

</section>

<div class="example"><h2 class="title sectiontitle">JSON Example</h2>
<pre class="pre codeblock prettyprint"><code>{
  "ArrayOfMessageBody" : [
    {
      "message" : {
        "alert" : "New update available",
      },
      "settings" : {
        "apns" : {
          "delayWhileIdle" : true,
          "payload" : "",
          "sound" : "song.mp3",
          "timeToLive" : 100,
        },
        "gcm" : {
          "badge" : 1,
          "iosActionKey" : "Ok",
          "payload" : "",
          "sound" : "song.mp3",
          "type" : "SILENT",
        },
        "wns" : {
          "badge" : ,
          "cachePolicy" : false,
          "expirationTime" : 20,
          "raw" : ,
          "tile" : ,
          "toast" : ,
        },
      },
      "target" : {
        "deviceIds" : "[TestDeviceId,..]",
        "platforms" : "[A,G,W]",
        "tagNames" : "[TestTag...]",
        "userIds" : [ "MyUserId", ... ],
      },
    },
    ...
  ],
}</code></pre></div>


<div class="example"><h2 class="title sectiontitle">XML Example</h2>
<pre class="pre codeblock prettyprint"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;send-message&gt;
  &lt;ArrayOfMessageBodyArray&gt;
    &lt;ArrayOfMessageBody&gt;
      &lt;message alert="New update available"/&gt;
      &lt;settings&gt;
        &lt;apns
          delayWhileIdle="true"
          payload=""
          sound="song.mp3"
          timeToLive="100"/&gt;
        &lt;gcm
          badge="1"
          iosActionKey="Ok"
          payload=""
          sound="song.mp3"
          type="SILENT"/&gt;
        &lt;wns
          badge=""
          cachePolicy="false"
          expirationTime="20"
          raw=""
          tile=""
          toast=""/&gt;
      &lt;/settings&gt;
      &lt;target
        deviceIds="[TestDeviceId,..]"
        platforms="[A,G,W]"
        tagNames="[TestTag...]"&gt;
        &lt;userIds&gt;
          &lt;userId&gt;MyUserId&lt;/userId&gt;
          ...
        &lt;/userIds&gt;
      &lt;/target&gt;
    &lt;/ArrayOfMessageBody&gt;
    ...
  &lt;/ArrayOfMessageBodyArray&gt;
&lt;/send-message&gt;
</code></pre></div>


<section class="section"><h2 class="title sectiontitle">Payload Properties</h2>

The payload has the following properties:<dl class="dl parml">
<dt class="dt pt dlterm">ArrayOfMessageBody</dt>

<dd class="dd pd">The array of message</dd>

</dl>

<p class="p">The <var class="keyword varname">array of messages</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">message</dt>

<dd class="dd pd">The notification message to be sent</dd>

<dt class="dt pt dlterm">settings</dt>

<dd class="dd pd">The settings for GCM, APNS and WNS.</dd>

<dt class="dt pt dlterm">target</dt>

<dd class="dd pd">The targets for sending notification</dd>

</dl>

<p class="p">The <var class="keyword varname">alert messages</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">alert</dt>

<dd class="dd pd">A string to be displayed in the alert.</dd>

</dl>

<p class="p">The <var class="keyword varname">message settings</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">apns</dt>

<dd class="dd pd">Attributes for sending message to an iOS device</dd>

<dt class="dt pt dlterm">gcm</dt>

<dd class="dd pd">Attributes for sending message to an Android device</dd>

<dt class="dt pt dlterm">wns</dt>

<dd class="dd pd">Attributes for sending message to an Windows device</dd>

</dl>

<p class="p">The <var class="keyword varname">apns settings</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">badge</dt>

<dd class="dd pd">An integer value to be displayed in a badge on the application icon.</dd>

<dt class="dt pt dlterm">iosActionKey</dt>

<dd class="dd pd">The label of the dialog box button that allows the user to open the app upon receiving the notification.</dd>

<dt class="dt pt dlterm">payload</dt>

<dd class="dd pd">A JSON block that is transferred to the application if the application is opened by the user when the notification is received, or if the application is already open.</dd>

<dt class="dt pt dlterm">sound</dt>

<dd class="dd pd">The name of a file to play when the notification arrives.</dd>

<dt class="dt pt dlterm">type</dt>

<dd class="dd pd">Specify the type of APNS notification. It should be either DEFAULT, MIXED or SILENT</dd>

</dl>

<p class="p">The <var class="keyword varname">gcm settings</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">delayWhileIdle</dt>

<dd class="dd pd">A Boolean value to indicate that the message must not be sent if the device is idle. The server waits for the device to become active before the message is sent.</dd>

<dt class="dt pt dlterm">payload</dt>

<dd class="dd pd">A JSON block that is transferred to the application if the application is opened by the user when the notification is received, or if the application is already open.</dd>

<dt class="dt pt dlterm">sound</dt>

<dd class="dd pd">The name of a file to play when the notification arrives.</dd>

<dt class="dt pt dlterm">timeToLive</dt>

<dd class="dd pd">The duration (in seconds) that the message is kept on GCM storage if the device is offline. The default value is 4 weeks, and must be set as a JSON number.</dd>

</dl>

<p class="p">The <var class="keyword varname">wns settings</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">badge</dt>

<dd class="dd pd">Optional. A numeric or string value that indicates a prdefined glyph to be displayed.</dd>

<dt class="dt pt dlterm">cachePolicy</dt>

<dd class="dd pd">Optional. A boolean value that indicates if the notification should be cached or not.</dd>

<dt class="dt pt dlterm">expirationTime</dt>

<dd class="dd pd">Optional. Expriry time of the notification.</dd>

<dt class="dt pt dlterm">raw</dt>

<dd class="dd pd">Optional. A JSON block that is transferred to the application only if the application is already open.</dd>

<dt class="dt pt dlterm">tile</dt>

<dd class="dd pd">Optional. Updates to tile to communicate new information to the user</dd>

<dt class="dt pt dlterm">toast</dt>

<dd class="dd pd">Optional. Updates to the toast to communicate new information to the user</dd>

</dl>

<p class="p">The <var class="keyword varname">badge</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">value</dt>

<dd class="dd pd">Optional. A numeric or string value that indicates a prdefined glyph to be displayed.</dd>

<dt class="dt pt dlterm">version</dt>

<dd class="dd pd">Optional. Version of the payload.</dd>

</dl>

<p class="p">The <var class="keyword varname">raw</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">payload</dt>

<dd class="dd pd">Optional. A JSON block that is transferred to the application only if the application is already open.</dd>

</dl>

<p class="p">The <var class="keyword varname">tile</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">tag</dt>

<dd class="dd pd">Optional. A string value that is set as label for the notification. Used in notification cycling.</dd>

<dt class="dt pt dlterm">visual</dt>

<dd class="dd pd">Optional. Visual settings for the notification</dd>

</dl>

<p class="p">The <var class="keyword varname">visual</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">addImageQuery</dt>

<dd class="dd pd">Optional. A boolean value that indicates if the query string need to be appended to image URI.</dd>

<dt class="dt pt dlterm">baseUri</dt>

<dd class="dd pd">Optional. Base URI to be combined with the relative URIs.</dd>

<dt class="dt pt dlterm">binding</dt>

<dd class="dd pd">Optional. For tile notifications, its a JSON array containing JSON blocks of binding attributes. For toast notification, its a JSON block of binding attributes.</dd>

<dt class="dt pt dlterm">branding</dt>

<dd class="dd pd">Optional. Indicates whether logo or app's name to be shown. Default is None.</dd>

<dt class="dt pt dlterm">contentId</dt>

<dd class="dd pd">Optional. A string value that identifies the notification content. Only applies to tile notifications.</dd>

<dt class="dt pt dlterm">lang</dt>

<dd class="dd pd">Optional. Locale of the payload.</dd>

<dt class="dt pt dlterm">version</dt>

<dd class="dd pd">Optional. Version of the payload.</dd>

</dl>

<p class="p">The <var class="keyword varname">toast</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">audio</dt>

<dd class="dd pd">Optional. Audio settings for the notification</dd>

<dt class="dt pt dlterm">duration</dt>

<dd class="dd pd">Optional. Notification will be displayed for the specified duration. Should be 'short' or 'long'.</dd>

<dt class="dt pt dlterm">launch</dt>

<dd class="dd pd">Optional. A string value that is passed to the application when it is launched by tapping or clicking the toast notification.</dd>

<dt class="dt pt dlterm">visual</dt>

<dd class="dd pd">Optional. Visual settings for the notification</dd>

</dl>

<p class="p">The <var class="keyword varname">audio</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">loop</dt>

<dd class="dd pd">Optional.  A boolean value to indicate if the sound should be repeated or not.</dd>

<dt class="dt pt dlterm">silent</dt>

<dd class="dd pd">Optional. A boolean value to indicate if the sound should be played or not.</dd>

<dt class="dt pt dlterm">src</dt>

<dd class="dd pd">Optional. A string value that specifies the notification sound type or path to local audio file.</dd>

</dl>

<p class="p">The <var class="keyword varname">target settings</var> has the following properties:</p>
<dl class="dl parml">
<dt class="dt pt dlterm">deviceIds</dt>

<dd class="dd pd">A JSON array of the device identifiers. Devices with these ids receive notification.</dd>

<dt class="dt pt dlterm">platforms</dt>

<dd class="dd pd">A JSON array of platforms. The devices that run on these platforms receive notification. Supported values are A (Apple/iOS), G (Google/Android) and W (Microsoft/Windows).</dd>

<dt class="dt pt dlterm">tagNames</dt>

<dd class="dd pd">A JSON array of tags. The devices that are subscribed to these tags receive notification.</dd>

<dt class="dt pt dlterm">userIds</dt>

<dd class="dd pd">An array of users represented by their userIds to send the notification. This is a unicast notification.</dd>

</dl>

</section>


<section class="section"><h2 class="title sectiontitle">Errors</h2>

<span class="keyword msgnum">400</span>
<pre class="pre msgblock">The request was not understood by the push server.</pre>

<span class="keyword msgnum">403</span>
<pre class="pre msgblock">The user is not authorized to call this service.</pre>

<span class="keyword msgnum">404</span>
<pre class="pre msgblock">The corresponding runtime or application is not found or not running.</pre>

<span class="keyword msgnum">500</span>
<pre class="pre msgblock">An internal error occurred.</pre>

</section>


</div>
</div></body>
</html>
